<!DOCTYPE html> 
<html>        
  <head>
    <img src=184-1841623_eagle-logo-png-transparent-png.png/>
    <h1>Welcome to Namias Search</h1>
  </head>
  <style>
    body {
      font-family: sans-serif;
            color: rgb(217, 26, 26);
      text-align: center;
    }
    h1 {
     text-align: center;
      font-family: sans-serif;
      color: rgb(217, 26, 26);
    }
    h2 {
      font-family: sans-serif;
      color: rgb(0, 255, 4);
      text-align: center;
    }
    button{
                width:50px;
                height:50px;
                border-radius:100%;
                border:5px solid rgb(230, 76, 94);
                background-color:rgb(235, 124, 124);
                font-size:20px;
                color:#fff;
                margin-top:12px;
            }
            button:hover{
                background-color:rgb(250, 165, 179);
            }
            
            #button-bar{
                width:300px;
                height:75px;
                border:5px solid rgb(230, 76, 89);
                background-color:rgb(235, 124, 124);
                margin-left:auto;
                margin-right:auto;
                border-radius:50px;
            }
            #right{
                float:right;
                margin-right:15px;
            }
            
            #left{
                float:left;
                margin-left:15px;
            }
            #container{
                width:450px;
                height:275px;
                padding:10px;
                margin-left:auto;
                margin-right:auto;
                background-color:rgb(230, 76, 83);
                margin-bottom: 15px;
            }
            img{
                height:275px;
                margin-left:auto;
                margin-right:auto;
                display:block;
            }
            
            .hide{
                display:none;
            }
    
  </style>
  <body>
    <body bgcolor="#e0e0e0">
        <p>We at the Namias Search are to inform those about galactic politics and events of tomorrow</p>
    <h2>Recent Events:</h2>
    <ul>
      <li> - Planet "ASO" is under attack by unknown flying objects. Damage reports to be annouced.</li>
       <img src=zYNpEgBudBydZBYosxVMq6-1200-80.jpg
       alt="Planet ASO being attacked by the unidentified flying objects, January 20th, 2040."/>
      <li> - President of the Galactic Sonar government has sent orders to scout neighboring planets and solar systems.</li>
        <img src=OCR-L-CORTLAND-1201-01-01.webp
       alt="President Winston making his speech to explore other planets, June 19th, 2040."/>
      <li> - Cheif commander of the Redverse Front states that he "will be retiring in 2 years from now".</li>
      <img src=Galactic Council.jpg
           alt="Chief commander of the Redverse Front meeting with council members, July 4th, 2040."/>
      <li> - The Hidden Empires of Earth, Atlantis and it's downfall.</li>
      <p>Atlantis currently locates itself in the mid-Atlantic gap, the empire at large spanded 50,000 square miles of continent before sinking, the Atlanteans were powerful in terms of technology, but egoism played a critical role in their downfall.</p>
      <img src=atlantis_small.jpg
           alt="Image of the city of Atlantis."/>
      
      
      
       
      <h3>Foods from another planet similar to our beloved Earth, planet "KASO"</h3>
      <br>
    <div id="container">
        <img id="displayed" src="https://www.kasandbox.org/programming-images/food/berries.png" alt="Mushrooms">
    </div>
    <div id="button-bar">
        <button type="button" id="left">◄</button>
        <button type="button" id="right">►</button>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script>
    var srclist = [
        'berries.png',
        'tomatoes.png',
        'mushroom.png'
        ];
    var index = 0;
    $('#displayed').attr('src',srclist[index]);
    
    var checkIndx = function(){
        if(index===srclist.length-1){
            $('#right').addClass('hide');
        }else if(index===0){
            $('#left').addClass('hide');
        }else{
            $('button').removeClass('hide');
        }
    }
    
    checkIndx();
    
    $('#left').click(function(event){
        index--;
        $('#displayed').show()
                       .fadeOut(500,function(){
                        $(this).attr('src',srclist[index])
                               .hide()
                               .fadeIn(500);
                       })
        checkIndx();
    });
    
    $('#right').click(function(event){
        index++;
        $('#displayed').show()
                       .fadeOut(500,function(){
                        $(this).attr('src',srclist[index])
                               .hide()
                               .fadeIn(500);
                       })
                       
        checkIndx();
    });
      
      
    <h4>Memory Game, enjoy</h4>
      var Settings=null;
var Button=null;
var Board=null;
var Tile=null;
      
      var resetHandlers = function() {
    mouseClicked=null;
    mouseMoved=null;
    draw= null;
    loop();
};

var Button = function(config) {
    this.x = config.x || 0;
    this.y = config.y || 0;
    this.width = config.width || 80;
    this.height = config.height || 50;
    this.label = config.label || "Click";
    this.color = config.color || color(207, 85, 85);
    this.onClick = config.onClick || function() {};
    this.value=config.value;
};

Button.prototype.draw = function() {
    if (this.isMouseInside() && mouseIsPressed) {
        fill(255, 255, 255);
    }
    else {
       fill(this.color); 
    }
    rectMode(CENTER);
    rect(this.x, this.y, this.width, this.height, 5);
    fill(0, 0, 0);
    textSize(19);
    textAlign(CENTER, CENTER);
    text(this.label, this.x, this.y);
};

Button.prototype.isMouseInside = function() {
    return mouseX > this.x-this.width/2 &&
           mouseX < (this.x + this.width/2) &&
           mouseY > this.y - this.height/2 &&
           mouseY < (this.y + this.height/2);
};

Button.prototype.handleMouseClick = function() {
    if (this.isMouseInside()) {
        this.onClick();
    }
};

var Tile = function(x, y, face) {
    this.x = x;
    this.y = y;
    this.face = face;
    this.width = 70;
    this.isFaceUp = false;
    this.isMatch =false;
};

Tile.prototype.leaf_img = getImage("avatars/leaf-green");

Tile.prototype.draw = function() {
    rectMode(CORNER);
    if (this.isFaceUp) {
        if (0 && this.isMoused() ) {
            fill(109, 199, 76);
        } else {
            fill(214, 247, 202);
        }
        //fill(214, 247, 202);
        strokeWeight(2);
        rect(this.x, this.y, this.width, this.width, 10);
        image(this.face, this.x, this.y,
            this.width, this.width);
    } else {
        if (1 && this.isMoused() ) {
            fill(109, 199, 76);
        } else {
            fill(214, 247, 202);
        }
        //fill(214, 247, 202);
        strokeWeight(2);
        rect(this.x, this.y, this.width, this.width, 10);
        image(this.leaf_img, this.x, this.y,
            this.width, this.width);
    }
};


Tile.prototype.drawFaceDown = function() {
    this.isFaceUp = false;
    this.draw();
};

Tile.prototype.drawFaceUp = function() {
    this.isFaceUp = true;
    this.draw();
};

Tile.prototype.isMoused = function() {
    return this.isUnderMouse(mouseX, mouseY); };

Tile.prototype.isUnderMouse = function(x, y) {
    return x >= this.x && x <= this.x + this.width  &&
        y >= this.y && y <= this.y + this.width;
};

var Board =function(config) {
    this.cols = config.cols || 5;
    this.rows = config.rows || 4;
    this.robo =config.robo;
    this.tiles=[];
    this.flippedTiles = [];
    this.delayStartFC = null;
    this.numTries = 0;
    this.startTime=millis();
    if ((this.cols%2) && (this.rows%2) ) {
        if (this.cols <= this.rows) {this.cols++;}
        else {this.rows++;}
    }
    this.createTiles();
    this.btns =[];
    var self=this;
    this.btns.push( new Button({x:35,y:20,
        height:18, width:58, label:"reset",
        onClick: function() {
            resetHandlers();
            var b=new Board(self);
            
            b.start();}
        }) );
    this.btns.push( new Button({x:245,y:20,
        height:18, label:"settings",
        onClick: function() {
            resetHandlers();
            var s=new Settings({});
            s.start(); }
        }) );
};

Board.prototype.faces = [
    getImage("avatars/leafers-seed"),
    getImage("avatars/leafers-seedling"),
    getImage("avatars/leafers-sapling"),
    getImage("avatars/leafers-tree"),
    getImage("avatars/leafers-ultimate"),
    getImage("avatars/marcimus"),
    getImage("avatars/mr-pants"),
    getImage("avatars/mr-pink"),
    getImage("avatars/old-spice-man"),
    getImage("avatars/robot_female_1")
];

Board.prototype.createTiles = function() {
    // Make an array which has 2 of each, then randomize it
    var possibleFaces = this.faces.slice(0);
    var selected = [];
    for (var i = 0; i < (this.cols * this.rows) / 2; i++) {
        // Randomly pick one from the array of remaining faces
        var randomInd = floor(random(possibleFaces.length));
        var face = possibleFaces[randomInd];
        // Push twice onto array
        selected.push(face);
        selected.push(face);
        // Remove from array
        possibleFaces.splice(randomInd, 1);
    }
    
    // Now we need to randomize the array
    selected.sort(function() {
        return 0.5 - Math.random();
    });
    
    // Create the tiles
    //var tiles = [];
    for (var i = 0; i < this.cols; i++) {
        for (var j = 0; j < this.rows; j++) {
            this.tiles.push(new Tile(i * 78 + 10, j * 78 + 40, selected.pop()));
        }
    }
};


Board.prototype.hooks = {};

Board.prototype.hooks.mouseClicked = function() {
    //var tiles=this.tiles;
    var i,j;
    //var flippedTiles=this.flippedTiles;
    //var numTries=this.numTries;
    //var delayStartFC=0;
    //var startTime;
    
    if (mouseY < 42) {
        for (i=0;i<this.btns.length; i++ ) {
            this.btns[i].handleMouseClick();}
            return;
            
    }
    //if (mouseY < 55) { return;}
    
    for (var i = 0; i < this.tiles.length; i++) {
        if (this.tiles[i].isUnderMouse(mouseX, mouseY)) {
            if (this.flippedTiles.length < 2 && !this.tiles[i].isFaceUp) {
                this.tiles[i].drawFaceUp();
                this.flippedTiles.push(this.tiles[i]);
                if (this.flippedTiles.length === 2) {
                    this.numTries++;
                    if (this.flippedTiles[0].face === this.flippedTiles[1].face) {
                        this.flippedTiles[0].isMatch = true;
                        this.flippedTiles[1].isMatch = true;
                    }
                    this.delayStartFC = frameCount;
                    loop();
                }
            } 
        }
    }
    var foundAllMatches = true;
    for (var i = 0; i < this.tiles.length; i++) {
        foundAllMatches = foundAllMatches && this.tiles[i].isMatch;
    }
    if (foundAllMatches) {
        fill(0, 0, 0);
        textSize(20);
        textAlign(LEFT,BASELINE);
        text("You found them all in " + this.numTries + " tries!", 20, 375);
        text("and " + (((millis()-this.startTime)/1000)|0) + " seconds", 20,392);
    }
};

Board.prototype.hooks.mouseMoved = function() {
    for (var i = 0; i < this.tiles.length; i++) {
            if (!this.tiles[i].isMatch) {
                this.tiles[i].draw();
            }
    }
};

Board.prototype.hooks.draw = function() {
    var i,j;
    if (this.delayStartFC && (frameCount - this.delayStartFC) > 30) {
        for (var i = 0; i < this.tiles.length; i++) {
            if (!this.tiles[i].isMatch) {
                this.tiles[i].drawFaceDown();
            }
        }
        this.flippedTiles = [];
        this.delayStartFC = null;
        noLoop();
    }
    for (i=0;i<this.btns.length; i++ ) {
        this.btns[i].draw();}
};

Board.prototype.start = function() {
    var self=this;
    background(255, 255, 255);

// Now draw them face up
    for (var i = 0; i < this.tiles.length; i++) {
        this.tiles[i].drawFaceDown();
    }
    
    mouseMoved = function() {
        self.hooks.mouseMoved.call(self);
    };
    mouseClicked =function() {
        self.hooks.mouseClicked.call(self);
    };
    draw= function() {
        self.hooks.draw.call(self);
    };
    
};

var Settings = function(config) {
    this.cols = config.cols || 5;
    this.rows = config.rows || 4;
    this.robo =config.robo;
    this.btns =[];
    var self=this;
    var i,j;
    
    this.btns.push( new Button({x:80,y:350, label:"play solo", width:100,
        onClick: function() {
            resetHandlers();
            self.robo=false;
            var b=new Board(self);
            
            b.start();}
    }));
    
    // FIXME TODO add play against computer TODO
    if (0) {
        this.btns.push( new Button({x:280,y:350, label:"play robo", width:100,
            onClick: function() {
                resetHandlers();
                self.robo=true;
                var b=new Board(self);
                
                b.start();}
        }));
    }
    
    var setRow = function()  {
        self.rows = this.label;
    };
    var setCol = function()  {
        self.cols = this.label;
    };
    
    for (i=1;i<5;i++) {
        this.btns.push( new Button({x:120+25*i, y:150,
        label:i, width:15, value: i,
        onClick: setRow  }) );
    }
    
    for (i=1;i<6;i++) {
        this.btns.push( new Button({x:120+25*i,y:250,
        label:i, width:15,
        onClick: setCol }));
    }
    
};
Settings.prototype.hooks = {};

Settings.prototype.start = function() {
    var self=this;
    background(255, 255, 255);
    
    mouseMoved = function() {
        self.hooks.mouseMoved.call(self);
    };
    mouseClicked =function() {
        self.hooks.mouseClicked.call(self);
    };
    draw= function() {
        self.hooks.draw.call(self);
    };
    
};
Settings.prototype.hooks.mouseClicked = function() {
    var i,j;
    var self=this;

    for (i=0;i<this.btns.length; i++ ) {
        this.btns[i].handleMouseClick();}
    if (mouseY > 50 && mouseY <320) {
        self.hooks.draw.call(self);
    }
    //this.hooks.draw();
};
Settings.prototype.hooks.mouseMoved = function() {
    var i,j;
};
Settings.prototype.hooks.draw = function() {
    var i,j;
    background(255, 255, 255);
    for (i=0;i<this.btns.length; i++ ) {
        this.btns[i].draw();}
    textAlign(LEFT,BASELINE);
    text("Rows:" + this.rows, 10,150);
    text("Columns:" + this.cols, 10,250);
};

var b = new Board({});
b.start();
b=null;
      
    </script> 
      
    </ul>
    
 </body>
</html>
